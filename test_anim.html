<!DOCTYPE html>
<html>
    <head>
        <title>Sama Sama Studios</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="css/style.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="js/anime.min.js"></script>
        <script src="js/main.js"></script>
    </head>
    <body>
        <div id="orbit">
            <svg viewBox="0 0 640 215" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g id="Logo Sama noText">
                <path d="M200.1 44.3C95.5 -20.2 10.5 40.4 10.5 115.1C10.5 168.7 32.8 204.4 113.1 204.4C199.6 204.4 309.9 103.2 309.9 103.2C309.9 103.2 424.4 9 514.4 9C604.4 9 628.5 67.6 628.5 106.7C628.5 143.7 599.6 221.2 485.3 187.7C422 172.5 397 149 397 149" stroke="black" stroke-width="18" stroke-miterlimit="10" stroke-linecap="round"/>   
                </g>
            </svg>
        </div>        
        <div id="atom">
            <svg viewBox="0 0 89 79" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M39 9.90001C31.1 11.6 16.1 21.2 12.8 31.1C9.59995 40.6 5.59996 52.6 14.9 61.7C23.4 70 34.5 71.6 45.3 68.2C59.2 63.9 70.2 57.5 76.5 44.9C83.2 31.2 77.8 22.7 61 12.2C58 10.3 47.9 7.90001 39 9.90001Z" stroke="#FA6900" stroke-width="18" stroke-miterlimit="10"/>
            </svg>
        </div>        
                 
        <script>
        document.addEventListener("DOMContentLoaded", function(event) {            
            var path = anime.path('#orbit path');
            
            // Draw orbit.
            anime({
                targets: "#orbit path",
                opacity: [0.5, 1],
                strokeDasharray: [1425, 1500],
                strokeDashoffset: [1499, 250],
                easing: "linear",
                duraction: 1000,
                direction: "forwards"                
            });
            
            // Animate atom around orbit.
            anime({
                targets: "#atom",
                translateX: path("x"),
                translateY: path("y"),
                rotate: path("angle"),
                easing: 'linear',
                duration: 1000,
                direction: 'forwards',
                complete: function(anim) {
                    // Grow atom.
                    anime({
                        targets: "#atom",
                        scale: 1.5,
                        duration: 1000
                    });
                }
            });
            
//            $(function() {
//              var $window = $(window);
//              var scrollTop = $window.scrollTop();
//                var path = anime.path('#orbit');
//
//              let basicTimeline = anime({
//                targets: "#atom",
////                translateY: [0, $window.height() - $(".logo").height()],
//                  translateX: path('x'),
//                  translateY: path('y'),
//                  rotate: path('angle'),
//                autoplay: false,
//                offset: 0,
//                duration: 2000
//            });
//
//              var raf = null, timeout = null, scrollPercent = 0;
//
//              $window.on("scroll", function() {
//                var documentHeight = $(document).height();
//                var windowHeight = $window.height();
//                scrollTop = $(window).scrollTop();
//                scrollPercent = Math.max(
//                  scrollTop / (documentHeight - windowHeight),
//                  0
//                );
//
//                console.log('scrolling: ' + scrollPercent);
//
//                if (null === raf) {
//                  raf = requestAnimationFrame(update);
//                }                
//              });
//
//              var update = function() {
//                var progress = basicTimeline.progress / 100;
//                var proxyProgress = scrollPercent;
//                var diff = proxyProgress - progress;
//
//                console.log('diff:' + diff);
//                progress += (proxyProgress - progress) * 0.05;    
//                basicTimeline.seek(progress * 2000);
//                console.log('updating:' + progress);
//
//                if (Math.abs(diff) > 0.000005) {
//                  raf = requestAnimationFrame(update);  
//                } else if (raf) {console.log('cancelling');
//                  cancelAnimationFrame(raf);
//                  raf = null;
//                }       
//            }    
//            });
        });
        </script>
    </body>    
</html>